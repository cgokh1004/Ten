<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="scheduler">
 
 <resultMap id="scheduler" type="SchedulerVO">
  <result property="event_id" column="event_id"/>
  <result property="event_name" column="event_name"/>
  <result property="start_date" column="start_date"/>
  <result property="end_date" column="end_date"/>	
  <result property="ID" column="ID"/>	
 </resultMap>
 
  <!-- 1. create  -->
 <insert id="insertEvent" parameterType="SchedulerVO"> 
 	<selectKey keyProperty="event_id" resultType="Integer" order="BEFORE">
 		SELECT events.nextval FROM DUAL
 	</selectKey>
 	INSERT INTO events (event_id, event_name, start_date, end_date, id) VALUES (#{event_id}, #{event_name}, #{start_date}, #{end_date}, #{id})
 </insert>
 
<!-- 2. update -->
 <update id="updateEvent" parameterType="SchedulerVO"> 
 	UPDATE events SET event_name=#{event_name}, start_date=#{start_date}, end_date=#{end_date} WHERE event_id=#{event_id}
 </update>
 
 <!-- 3. read -->
 <select id="getEvent" resultMap="scheduler"> 
 	SELECT event_id, event_name, start_date, end_date, ID FROM events 
 	WHERE ID = #{ID} 	
 </select>
 
 <!-- 4. delete -->
  <delete id="deleteEvent" parameterType="int">
  	DELETE FROM events WHERE event_id=#{event_id} 
  </delete>

<!-- 5. list -->
  <select id="list" parameterType="Map" resultType="int">
    SELECT event_id, event_name, start_date, end_date, ID
    FROM events
    ORDER BY event_id DESC
</select>
    
</mapper>